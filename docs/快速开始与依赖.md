# 快速开始与依赖指南（精简版）

> 统一替代根目录的《快速开始指南.md》《依赖管理指南.md》，作为仓库唯一的上手入口。

## 1️⃣ 五分钟起步

1. 克隆并进入仓库  
   `git clone ... && cd /Users/xrj/PycharmProjects/learn`
2. 创建并激活虚拟环境（推荐 Python 3.10+）  
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # Windows 使用 .venv\Scripts\activate
   ```
3. 安装开发依赖（含运行依赖）  
   `pip install -r requirements-dev.txt`
4. 运行首个示例  
   `python 01.Python语言基础/01_快速上手与基本语法/demo_hello.py`

## 2️⃣ 服务与前端速查

- 启动 RBAC 服务：`uvicorn rbac_auth_service.app.main:app --reload --port 8001`
- 启动 网关服务：`uvicorn integration_gateway_service.app.main:app --reload --port 8000`
- 启动 审计服务：`uvicorn log_audit_service.app.main:app --reload --port 8002`
- 启动 日志侦探服务：`uvicorn log_detective_service.app.main:app --reload --port 9003`
- 启动 示例业务服务：`uvicorn backend_user_order_service.app.main:app --reload --port 9000`
- 启动前端静态页：`python -m http.server 5500 -d frontend`

> 典型联调入口：`http://127.0.0.1:5500/log-detective.html` → 经过网关调用日志侦探。

## 3️⃣ 依赖文件一览（简版说明）

| 文件 | 用途 | 安装命令 |
| --- | --- | --- |
| `requirements.txt` | 运行时依赖 | `pip install -r requirements.txt` |
| `requirements-dev.txt` | 开发/测试依赖，包含 requirements.txt | `pip install -r requirements-dev.txt` |
| `pyproject.toml` | 项目元数据与工具配置 | `pip install -e .`（若后续发布成包时使用） |

默认使用“最低版本约束”（`>=`），便于兼容最新补丁；如需锁定，可在本地生成 `requirements-lock.txt`。

## 4️⃣ 常用任务脚本

- 运行全部实战项目测试：`pytest 03.项目实战/`
- 运行日志侦探服务测试：`pytest log_detective_service`
- 代码格式化：`black .`
- 代码风格检查：`flake8 .`
- Pydantic v2 兼容已落地，如仍见 `dict()`/`orm_mode` 警告，请改用 `model_dump()` / `ConfigDict(from_attributes=True)`

## 5️⃣ 文档导航（最少必读）

- `README.md`：仓库综述 + 架构总览
- `docs/architecture.md`：微服务架构与调用关系
- `docs/Python学习规划_Java开发者版.md`：学习路线
- `docs/Java_vs_Python_CheatSheet.md`：Java↔Python对照速查
- `docs/查漏补缺清单.md`：对照廖雪峰教程的覆盖/缺口
- 前端与服务说明：`frontend/README.md`、各服务 `09_项目说明.md`
- `.env.example`：常用连接占位（MySQL/Redis/MinIO），无服务时可留空或使用 mock

## 6️⃣ 故障排查速览

- 模块导入失败：确认已激活 `.venv`，并在仓库根目录运行命令。
- 服务 4xx/5xx：查看网关日志；RBAC Token 过期后重新登录。
- 端口冲突：调整 `--port` 参数，并同步修改 `frontend/config.js` 中对应的 `authApiBaseUrl` / `gatewayApiBaseUrl` / `logApiBaseUrl`。
- 无网络/无后端：前端 mock 模式 + httpx MockTransport 契约测试，详见 `frontend/README.md#mock-模式`

## 7️⃣ 下一步

- 想快速上手项目实战：从 `03.项目实战/03_TODO_Web_API_FastAPI` 启动。
- 想深入 Pythonic 写法：阅读 `01.Python语言基础/14_开发技巧_写法优化/` 目录。
- 想练习并发/异步：运行 `01.Python语言基础/15_进阶专题` 中的多线程、多进程、异步示例。

## 8️⃣ 可选工具：pipx / uv / pyenv 概览

> 本仓库所有示例都可以只用「venv + pip」完成，下面这些工具只是方便你在本机管理多个 Python 版本和命令行工具，可按需选择。

- `pipx`：适合安装「命令行工具」到独立环境，例如 `pipx install black`、`pipx install ruff`，不会污染当前项目虚拟环境。
- `uv`：更快的包管理工具，支持创建虚拟环境和安装依赖，可在本仓库中替代 `pip install -r requirements-dev.txt` 使用。
- `pyenv`：用于在同一台机器上管理多个 Python 版本（例如 3.10 / 3.11），便于在不同项目间切换。

建议做法：

- 第 1 步：先按本文 1️⃣ 中的方式使用标准库 `venv` 跑通整个仓库；
- 第 2 步：如果你已经熟悉基本流程，再尝试用 `pyenv` 管理 Python 版本、用 `uv` 或 `pipx` 管理全局工具，对比两种方式的差异和优缺点。
