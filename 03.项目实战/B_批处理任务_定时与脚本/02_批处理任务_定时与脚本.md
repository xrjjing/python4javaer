# B_批处理任务_定时与脚本

> 目标：围绕「批量处理 / 定时任务」场景，练习用 Python 编写离线脚本，包括：日志归档、日终报表、定期分析任务等。

本分目录主要聚合与「batch / 定时任务」强相关的实战项目：

- `06_自动化脚本_日志归档`；
- `04_小型数据分析项目_销售统计`；
- 以及可以按计划执行的 `02_日志分析与报表生成` 等。

---

## 阶段 B1：文件级批处理（日志归档）

对应项目：`06_自动化脚本_日志归档`

- 目标：
  - 学会遍历目录、筛选文件；
  - 基于时间戳筛选「过期」文件；
  - 将文件压缩归档并（可选）删除。
- 建议流程：
  1. 为项目准备一个 `logs/` 目录，放几天前和今天的测试 `.log` 文件；
  2. 运行脚本：

     ```bash
     python 03.项目实战/06_自动化脚本_日志归档/archive_old_logs.py \
       --dir ./logs --days 7 --delete
     ```

  3. 观察哪些文件被归档，归档文件的命名规则；
  4. 尝试只处理 `.out` 日志、或多种后缀组合。

---

## 阶段 B2：数据级批处理（日终报表）

对应项目：`04_小型数据分析项目_销售统计`

- 目标：
  - 使用 pandas 读取 CSV；
  - 计算统计指标（总额、按商品/日期统计等）；
  - 为后续「每天跑一次报表」打基础。
- 建议流程：
  1. 按文档说明准备 `sales.csv`；
  2. 运行 `analyze_sales.py`；
  3. 思考如果把这个脚本每天凌晨执行一次（配合 crontab），就可以自动生成销售日报。

---

## 阶段 B3：组合批处理场景（日志 + 报表）

当 B1 和 B2 都熟悉之后，你可以尝试：

- 写一个「总调度脚本」，依次调用：
  - 日志归档；
  - 销售统计；
  - 监控数据统计（见 C 组项目）。
- 最终实现一个「日终批处理」：
  - 归档昨天以前的日志；
  - 生成昨天的销量报表；
  - 生成昨天的监控指标汇总。

这会非常贴近你在 Java 环境下写 batch job 的场景，只是语言换成了 Python。

