# 10_迭代器与生成器

## 学习目标

- 理解「可迭代对象」「迭代器」的概念
- 会使用内置函数 `iter()`、`next()` 手动迭代
- 理解生成器（generator）的作用，并会写简单生成器函数
- 初步理解生成器表达式，知道何时用列表 / 生成器

---

## 知识点清单

- 可迭代对象：可以用于 `for x in obj` 的对象，例如 `list`、`tuple`、`dict`、`set`、`str`、`range` 等。
- 迭代器：实现了 `__iter__()` 和 `__next__()` 的对象，可用 `next()` 获取下一个元素。
- 内置函数：

  ```python
  it = iter([1, 2, 3])
  print(next(it))  # 1
  print(next(it))  # 2
  ```

- 生成器函数：包含 `yield` 的函数，调用时不会立刻执行，而是返回一个生成器对象，按需计算。

  ```python
  def count_up_to(n):
      i = 1
      while i <= n:
          yield i
          i += 1
  ```

- 生成器表达式：

  ```python
  squares = (x * x for x in range(10))  # 注意是圆括号
  ```

---

## 示例 demo：迭代器与生成器对比

```python
# demo_iterator_generator.py

def demo_iterator():
    nums = [10, 20, 30]
    it = iter(nums)
    print(next(it))  # 10
    print(next(it))  # 20
    print(next(it))  # 30
    # 再 next 会抛出 StopIteration 异常


def count_up_to(n: int):
    """生成 1..n 的生成器"""
    i = 1
    while i <= n:
        print("生成一个值：", i)
        yield i
        i += 1


def demo_generator():
    gen = count_up_to(3)
    for value in gen:
        print("收到的值：", value)


if __name__ == "__main__":
    demo_iterator()
    demo_generator()
```

---

## 练习题（建议新建 `practice_iterator_generator.py` 完成）

1. 使用迭代器手动遍历一个字符串 `"python"`，逐个打印字符。  
2. 编写生成器函数 `even_numbers(n)`，依次生成从 0 到 n 的所有偶数，在主程序中遍历打印。  
3. 使用生成器表达式计算 `1^2 + 2^2 + ... + 100^2` 的和。  
4. 思考题：对于一个包含一百万个数字的序列计算平方和，使用「列表推导式 + `sum()`」和「生成器表达式 + `sum()`」有什么差别？

